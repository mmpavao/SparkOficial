import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

// Supported languages
export type Language = 'pt' | 'en' | 'zh' | 'es' | 'ru';

// Translation interface
interface Translations {
  [key: string]: string | Translations;
}

// Context interface
interface I18nContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string, params?: Record<string, string>) => string;
  translations: Translations;
}

// Create context
const I18nContext = createContext<I18nContextType | undefined>(undefined);

// Default translations (Portuguese - primary language for Brazilian platform)
const defaultTranslations: Record<Language, Translations> = {
  pt: {
    // Auth module
    auth: {
      platformDescription: 'Plataforma completa de crédito e importação para empresas brasileiras',
      secure: 'Seguro',
      fast: 'Rápido',
      efficient: 'Eficiente',
      login: 'Entrar',
      register: 'Cadastrar',
      email: 'E-mail',
      password: 'Senha',
      rememberMe: 'Lembrar de mim',
      forgotPassword: 'Esqueceu a senha?',
      dontHaveAccount: 'Não tem conta?',
      alreadyHaveAccount: 'Já tem conta?',
      loginSuccess: 'Login realizado com sucesso',
      registerSuccess: 'Cadastro realizado com sucesso',
      welcomeBack: 'Bem-vindo de volta',
      loginDescription: 'Entre com suas credenciais para acessar sua conta'
    },
    // Credit module
    credit: {
      title: 'Aplicações de Crédito',
      newApplication: 'Nova Aplicação',
      requestedAmount: 'Valor Solicitado',
      status: 'Status',
      details: 'Ver Detalhes',
      edit: 'Editar',
      cancel: 'Cancelar',
      pending: 'Pendente',
      approved: 'Aprovado',
      rejected: 'Rejeitado',
      underReview: 'Em Análise'
    },
    // Financial module (Financeira)
    financial: {
      title: 'Análise Financeira',
      dashboard: 'Dashboard Financeiro',
      applications: 'Aplicações Submetidas',
      analysis: 'Análise de Crédito',
      approve: 'Aprovar Crédito',
      reject: 'Rejeitar Aplicação',
      pending: 'Aguardando Análise',
      approved: 'Aprovado',
      rejected: 'Rejeitado',
      underAnalysis: 'Em Análise',
      creditLimit: 'Limite de Crédito',
      paymentTerms: 'Condições de Pagamento',
      riskAssessment: 'Avaliação de Risco',
      financialNotes: 'Observações Financeiras',
      approvalDate: 'Data de Aprovação',
      submittedApplications: 'Aplicações Submetidas',
      totalApproved: 'Total Aprovado',
      totalRejected: 'Total Rejeitado',
      avgAnalysisTime: 'Tempo Médio de Análise',
      lowRisk: 'Baixo Risco',
      mediumRisk: 'Médio Risco',
      highRisk: 'Alto Risco',
      confirmApproval: 'Confirmar Aprovação',
      confirmRejection: 'Confirmar Rejeição',
      approvalConfirmation: 'Tem certeza de que deseja aprovar esta aplicação de crédito?',
      rejectionConfirmation: 'Tem certeza de que deseja rejeitar esta aplicação?',
      approvalSuccess: 'Aplicação aprovada com sucesso',
      rejectionSuccess: 'Aplicação rejeitada com sucesso',
      enterCreditLimit: 'Informe o limite de crédito',
      selectPaymentTerms: 'Selecione as condições de pagamento',
      addFinancialNotes: 'Adicione observações financeiras',
      requiredField: 'Campo obrigatório',
      invalidAmount: 'Valor inválido',
      days30: '30 dias',
      days60: '60 dias',
      days90: '90 dias',
      days120: '120 dias',
      days150: '150 dias',
      days180: '180 dias',
      monthlyStatistics: 'Estatísticas do Mês',
      receivedApplications: 'Aplicações Recebidas',
      approvals: 'Aprovações',
      approvedVolume: 'Volume Aprovado',
      recentActivity: 'Atividade Recente',
      requested: 'Solicitado',
      underReview: 'Em Análise',
      other: 'Outro',
      thisMonth: 'Este mês',
      totalRequested: 'Volume total pedido',
      beingUsed: 'Sendo utilizado',
      availableCredit: 'Crédito Disponível',
      freeToUse: 'Livre para uso',
      avgApprovalTime: 'Tempo Médio Aprovação',
      daysToApprove: 'Dias para aprovar',
      utilizationRate: 'Taxa de Utilização',
      ofApprovedCredit: 'Do crédito aprovado',
      applicationStatusTitle: 'Status das Aplicações de Crédito',
      creditAnalysis: 'Análise de Crédito',
      importAnalysis: 'Análise de Importações',
      allSuppliers: 'Todos os Fornecedores',
      reports: 'Relatórios',
      requestId: 'ID da Solicitação',
      preAnalysis: 'Pré-Análise',
      createdAt: 'Criado em',
      updatedAt: 'Atualizado em',
      viewDetails: 'Ver Detalhes',
      edit: 'Editar',
      cancel: 'Cancelar',
      adminCreditManagement: 'Gestão de Crédito - Área Administrativa',
      adminDescription: 'Visualize e gerencie todas as solicitações de crédito da plataforma',
      financialDescription: 'Avalie e aprove solicitações de crédito pré-analisadas pela administração',
      userDescription: 'Solicite crédito para suas importações',
      allCreditApplications: 'Todas as Solicitações de Crédito',
      success: 'Sucesso',
      error: 'Erro',
      applicationCancelledSuccess: 'Solicitação de crédito cancelada com sucesso.',
      applicationCancelError: 'Erro ao cancelar solicitação de crédito.',
      expandFilters: 'Expandir',
      collapseFilters: 'Recolher',
      adminFilters: 'Filtros Administrativos',
      active: 'Ativos',
      clear: 'Limpar',
      company: 'Empresa',
      companyPlaceholder: 'Nome da empresa...',
      minAmount: 'Valor Mínimo (USD)',
      minAmountPlaceholder: '$ 0',
      riskLevel: 'Nível de Risco',
      allLevels: 'Todos os níveis',
      low: 'Baixo',
      medium: 'Médio',
      high: 'Alto',
      maxAmount: 'Valor Máximo (USD)',
      maxAmountPlaceholder: '$ 1.000.000',
      allStatus: 'Todos os status',
      preApproved: 'Pré-aprovado',
      needsDocuments: 'Precisa documentos',
      needsClarification: 'Precisa esclarecimentos',
      inAnalysis: 'Em análise',
      zeroApplications: '0 aplicações',
      creditRequestsWillAppearHere: 'Suas solicitações de crédito aparecerão aqui.',
      application: 'aplicação',
      confirmCancelApplication: 'Tem certeza que deseja cancelar esta solicitação de crédito?'
    },
    // Common terms
    common: {
      save: 'Salvar',
      cancel: 'Cancelar',
      loading: 'Carregando...',
      error: 'Erro',
      success: 'Sucesso'
    }
  },
  en: {
    auth: {
      platformDescription: 'Complete credit and import platform for Brazilian businesses',
      secure: 'Secure',
      fast: 'Fast',
      efficient: 'Efficient',
      login: 'Login',
      register: 'Register',
      email: 'Email',
      password: 'Password',
      rememberMe: 'Remember me',
      forgotPassword: 'Forgot password?',
      dontHaveAccount: "Don't have an account?",
      alreadyHaveAccount: 'Already have an account?',
      loginSuccess: 'Login successful',
      registerSuccess: 'Registration successful'
    },
    credit: {
      title: 'Credit Applications',
      newApplication: 'New Application',
      requestedAmount: 'Requested Amount',
      status: 'Status',
      details: 'View Details',
      edit: 'Edit',
      cancel: 'Cancel',
      pending: 'Pending',
      approved: 'Approved',
      rejected: 'Rejected',
      underReview: 'Under Review'
    },
    // Financial module (Financeira)
    financial: {
      title: 'Financial Analysis',
      dashboard: 'Financial Dashboard',
      applications: 'Submitted Applications',
      analysis: 'Credit Analysis',
      approve: 'Approve Credit',
      reject: 'Reject Application',
      pending: 'Awaiting Analysis',
      approved: 'Approved',
      rejected: 'Rejected',
      underAnalysis: 'Under Analysis',
      creditLimit: 'Credit Limit',
      paymentTerms: 'Payment Terms',
      riskAssessment: 'Risk Assessment',
      financialNotes: 'Financial Notes',
      approvalDate: 'Approval Date',
      submittedApplications: 'Submitted Applications',
      totalApproved: 'Total Approved',
      totalRejected: 'Total Rejected',
      avgAnalysisTime: 'Average Analysis Time',
      lowRisk: 'Low Risk',
      mediumRisk: 'Medium Risk',
      highRisk: 'High Risk',
      confirmApproval: 'Confirm Approval',
      confirmRejection: 'Confirm Rejection',
      approvalConfirmation: 'Are you sure you want to approve this credit application?',
      rejectionConfirmation: 'Are you sure you want to reject this application?',
      approvalSuccess: 'Application approved successfully',
      rejectionSuccess: 'Application rejected successfully',
      enterCreditLimit: 'Enter credit limit',
      selectPaymentTerms: 'Select payment terms',
      addFinancialNotes: 'Add financial notes',
      requiredField: 'Required field',
      invalidAmount: 'Invalid amount',
      days30: '30 days',
      days60: '60 days',
      days90: '90 days',
      days120: '120 days',
      days150: '150 days',
      days180: '180 days',
      monthlyStatistics: 'Monthly Statistics',
      receivedApplications: 'Received Applications',
      approvals: 'Approvals',
      approvedVolume: 'Approved Volume',
      recentActivity: 'Recent Activity',
      requested: 'Requested',
      underReview: 'Under Review',
      cancelled: 'Cancelled',
      other: 'Other',
      thisMonth: 'This month',
      totalRequested: 'Total requested amount',
      beingUsed: 'Being used',
      availableCredit: 'Available Credit',
      freeToUse: 'Free to use',
      avgApprovalTime: 'Average Approval Time',
      daysToApprove: 'Days to approve',
      utilizationRate: 'Utilization Rate',
      ofApprovedCredit: 'Of approved credit',
      applicationStatusTitle: 'Credit Application Status',
      creditAnalysis: 'Credit Analysis',
      importAnalysis: 'Import Analysis',
      allSuppliers: 'All Suppliers',
      reports: 'Reports',
      requestId: 'Request ID',
      preAnalysis: 'Pre-Analysis',
      createdAt: 'Created at',
      updatedAt: 'Updated at',
      viewDetails: 'View Details',
      edit: 'Edit',
      cancel: 'Cancel',
      adminCreditManagement: 'Credit Management - Administrative Area',
      adminDescription: 'View and manage all credit applications on the platform',
      financialDescription: 'Evaluate and approve credit applications pre-analyzed by administration',
      userDescription: 'Request credit for your imports',
      allCreditApplications: 'All Credit Applications',
      success: 'Success',
      error: 'Error',
      applicationCancelledSuccess: 'Credit application cancelled successfully.',
      applicationCancelError: 'Error cancelling credit application.',
      expandFilters: 'Expand',
      collapseFilters: 'Collapse',
      adminFilters: 'Administrative Filters',
      active: 'Active',
      clear: 'Clear',
      company: 'Company',
      companyPlaceholder: 'Company name...',
      minAmount: 'Minimum Amount (USD)',
      minAmountPlaceholder: '$ 0',
      riskLevel: 'Risk Level',
      allLevels: 'All levels',
      low: 'Low',
      medium: 'Medium',
      high: 'High',
      maxAmount: 'Maximum Amount (USD)',
      maxAmountPlaceholder: '$ 1,000,000',
      allStatus: 'All statuses',
      preApproved: 'Pre-approved',
      needsDocuments: 'Needs documents',
      needsClarification: 'Needs clarification',
      inAnalysis: 'In analysis',
      zeroApplications: '0 applications',
      creditRequestsWillAppearHere: 'Your credit requests will appear here.',
      application: 'application',
      confirmCancelApplication: 'Are you sure you want to cancel this credit application?'
    },
    common: {
      save: 'Save',
      cancel: 'Cancel',
      loading: 'Loading...',
      error: 'Error',
      success: 'Success'
    }
  },
  zh: {
    auth: {
      platformDescription: '巴西企业完整的信贷和进口平台',
      secure: '安全',
      fast: '快速',
      efficient: '高效',
      login: '登录',
      register: '注册',
      email: '邮箱',
      password: '密码',
      rememberMe: '记住我',
      forgotPassword: '忘记密码？',
      dontHaveAccount: '没有账户？',
      alreadyHaveAccount: '已有账户？',
      loginSuccess: '登录成功',
      registerSuccess: '注册成功'
    },
    credit: {
      title: '信贷申请',
      newApplication: '新申请',
      requestedAmount: '申请金额',
      status: '状态',
      details: '查看详情',
      edit: '编辑',
      cancel: '取消',
      pending: '待审核',
      approved: '已批准',
      rejected: '已拒绝',
      underReview: '审核中'
    },
    // Financial module (Financeira)
    financial: {
      title: '金融分析',
      dashboard: '金融仪表板',
      applications: '已提交申请',
      analysis: '信贷分析',
      approve: '批准信贷',
      reject: '拒绝申请',
      pending: '等待分析',
      approved: '已批准',
      rejected: '已拒绝',
      underAnalysis: '分析中',
      creditLimit: '信贷额度',
      paymentTerms: '付款条件',
      riskAssessment: '风险评估',
      financialNotes: '财务备注',
      approvalDate: '批准日期',
      submittedApplications: '已提交申请',
      totalApproved: '总批准额',
      totalRejected: '总拒绝数',
      avgAnalysisTime: '平均分析时间',
      lowRisk: '低风险',
      mediumRisk: '中等风险',
      highRisk: '高风险',
      confirmApproval: '确认批准',
      confirmRejection: '确认拒绝',
      approvalConfirmation: '您确定要批准此信贷申请吗？',
      rejectionConfirmation: '您确定要拒绝此申请吗？',
      approvalSuccess: '申请已成功批准',
      rejectionSuccess: '申请已成功拒绝',
      enterCreditLimit: '输入信贷额度',
      selectPaymentTerms: '选择付款条件',
      addFinancialNotes: '添加财务备注',
      requiredField: '必填字段',
      invalidAmount: '无效金额',
      days30: '30天',
      days60: '60天',
      days90: '90天',
      days120: '120天',
      days150: '150天',
      days180: '180天',
      monthlyStatistics: '月度统计',
      receivedApplications: '收到的申请',
      approvals: '批准',
      approvedVolume: '批准金额',
      recentActivity: '最近活动',
      requested: '已申请',
      underReview: '审核中',
      cancelled: '已取消',
      other: '其他',
      thisMonth: '本月',
      totalRequested: '申请总金额',
      beingUsed: '使用中',
      availableCredit: '可用信贷',
      freeToUse: '可自由使用',
      avgApprovalTime: '平均审批时间',
      daysToApprove: '审批天数',
      utilizationRate: '使用率',
      ofApprovedCredit: '已批准信贷的',
      applicationStatusTitle: '信贷申请状态',
      creditAnalysis: '信贷分析',
      importAnalysis: '进口分析',
      allSuppliers: '所有供应商',
      reports: '报告',
      requestId: '申请ID',
      preAnalysis: '预分析',
      createdAt: '创建时间',
      updatedAt: '更新时间',
      viewDetails: '查看详情',
      edit: '编辑',
      cancel: '取消',
      adminCreditManagement: '信贷管理 - 管理区域',
      adminDescription: '查看和管理平台上的所有信贷申请',
      financialDescription: '评估和批准由管理部门预先分析的信贷申请',
      userDescription: '为您的进口申请信贷',
      allCreditApplications: '所有信贷申请',
      success: '成功',
      error: '错误',
      applicationCancelledSuccess: '信贷申请已成功取消。',
      applicationCancelError: '取消信贷申请时出错。',
      expandFilters: '展开',
      collapseFilters: '收起',
      adminFilters: '管理筛选器',
      active: '活跃',
      clear: '清除',
      company: '公司',
      companyPlaceholder: '公司名称...',
      minAmount: '最小金额 (USD)',
      minAmountPlaceholder: '$ 0',
      riskLevel: '风险等级',
      allLevels: '所有等级',
      low: '低',
      medium: '中',
      high: '高',
      maxAmount: '最大金额 (USD)',
      maxAmountPlaceholder: '$ 1,000,000',
      allStatus: '所有状态',
      preApproved: '预批准',
      needsDocuments: '需要文件',
      needsClarification: '需要澄清',
      inAnalysis: '分析中',
      zeroApplications: '0个申请',
      creditRequestsWillAppearHere: '您的信贷申请将在此显示。',
      application: '申请',
      confirmCancelApplication: '您确定要取消此信贷申请吗？'
    },
    common: {
      save: '保存',
      cancel: '取消',
      loading: '加载中...',
      error: '错误',
      success: '成功'
    }
  },
  es: {
    auth: {
      platformDescription: 'Plataforma completa de crédito e importación para empresas brasileñas',
      secure: 'Seguro',
      fast: 'Rápido',
      efficient: 'Eficiente',
      login: 'Iniciar Sesión',
      register: 'Registrarse',
      email: 'Correo',
      password: 'Contraseña',
      rememberMe: 'Recordarme',
      forgotPassword: '¿Olvidaste la contraseña?',
      dontHaveAccount: '¿No tienes cuenta?',
      alreadyHaveAccount: '¿Ya tienes cuenta?',
      loginSuccess: 'Inicio de sesión exitoso',
      registerSuccess: 'Registro exitoso'
    },
    credit: {
      title: 'Solicitudes de Crédito',
      newApplication: 'Nueva Solicitud',
      requestedAmount: 'Monto Solicitado',
      status: 'Estado',
      details: 'Ver Detalles',
      edit: 'Editar',
      cancel: 'Cancelar',
      pending: 'Pendiente',
      approved: 'Aprobado',
      rejected: 'Rechazado',
      underReview: 'En Revisión'
    },
    // Financial module (Financeira)
    financial: {
      title: 'Análisis Financiero',
      dashboard: 'Dashboard Financiero',
      applications: 'Solicitudes Enviadas',
      analysis: 'Análisis de Crédito',
      approve: 'Aprobar Crédito',
      reject: 'Rechazar Solicitud',
      pending: 'Esperando Análisis',
      approved: 'Aprobado',
      rejected: 'Rechazado',
      underAnalysis: 'En Análisis',
      creditLimit: 'Límite de Crédito',
      paymentTerms: 'Condiciones de Pago',
      riskAssessment: 'Evaluación de Riesgo',
      financialNotes: 'Notas Financieras',
      approvalDate: 'Fecha de Aprobación',
      submittedApplications: 'Solicitudes Enviadas',
      totalApproved: 'Total Aprobado',
      totalRejected: 'Total Rechazado',
      avgAnalysisTime: 'Tiempo Promedio de Análisis',
      lowRisk: 'Bajo Riesgo',
      mediumRisk: 'Riesgo Medio',
      highRisk: 'Alto Riesgo',
      confirmApproval: 'Confirmar Aprobación',
      confirmRejection: 'Confirmar Rechazo',
      approvalConfirmation: '¿Está seguro de que desea aprobar esta solicitud de crédito?',
      rejectionConfirmation: '¿Está seguro de que desea rechazar esta solicitud?',
      approvalSuccess: 'Solicitud aprobada exitosamente',
      rejectionSuccess: 'Solicitud rechazada exitosamente',
      enterCreditLimit: 'Ingrese el límite de crédito',
      selectPaymentTerms: 'Seleccione las condiciones de pago',
      addFinancialNotes: 'Agregar notas financieras',
      requiredField: 'Campo requerido',
      invalidAmount: 'Monto inválido',
      days30: '30 días',
      days60: '60 días',
      days90: '90 días',
      days120: '120 días',
      days150: '150 días',
      days180: '180 días',
      monthlyStatistics: 'Estadísticas Mensuales',
      receivedApplications: 'Solicitudes Recibidas',
      approvals: 'Aprobaciones',
      approvedVolume: 'Volumen Aprobado',
      recentActivity: 'Actividad Reciente',
      requested: 'Solicitado',
      underReview: 'En Revisión',
      cancelled: 'Canceladas',
      other: 'Otro',
      thisMonth: 'Este mes',
      totalRequested: 'Monto total solicitado',
      beingUsed: 'En uso',
      availableCredit: 'Crédito Disponible',
      freeToUse: 'Libre para usar',
      avgApprovalTime: 'Tiempo Promedio de Aprobación',
      daysToApprove: 'Días para aprobar',
      utilizationRate: 'Tasa de Utilización',
      ofApprovedCredit: 'Del crédito aprobado',
      applicationStatusTitle: 'Estado de Solicitudes de Crédito',
      creditAnalysis: 'Análisis de Crédito',
      importAnalysis: 'Análisis de Importaciones',
      allSuppliers: 'Todos los Proveedores',
      reports: 'Informes',
      requestId: 'ID de Solicitud',
      preAnalysis: 'Pre-Análisis',
      createdAt: 'Creado en',
      updatedAt: 'Actualizado en',
      viewDetails: 'Ver Detalles',
      edit: 'Editar',
      cancel: 'Cancelar',
      adminCreditManagement: 'Gestión de Crédito - Área Administrativa',
      adminDescription: 'Ver y gestionar todas las solicitudes de crédito en la plataforma',
      financialDescription: 'Evaluar y aprobar solicitudes de crédito preaprobadas por la administración',
      userDescription: 'Solicitar crédito para sus importaciones',
      allCreditApplications: 'Todas las Solicitudes de Crédito',
      success: 'Éxito',
      error: 'Error',
      applicationCancelledSuccess: 'Solicitud de crédito cancelada exitosamente.',
      applicationCancelError: 'Error al cancelar solicitud de crédito.',
      expandFilters: 'Expandir',
      collapseFilters: 'Contraer',
      adminFilters: 'Filtros Administrativos',
      active: 'Activos',
      clear: 'Limpiar',
      company: 'Empresa',
      companyPlaceholder: 'Nombre de la empresa...',
      minAmount: 'Monto Mínimo (USD)',
      minAmountPlaceholder: '$ 0',
      riskLevel: 'Nivel de Riesgo',
      allLevels: 'Todos los niveles',
      low: 'Bajo',
      medium: 'Medio',
      high: 'Alto',
      maxAmount: 'Monto Máximo (USD)',
      maxAmountPlaceholder: '$ 1.000.000',
      allStatus: 'Todos los estados',
      preApproved: 'Pre-aprobado',
      needsDocuments: 'Necesita documentos',
      needsClarification: 'Necesita aclaración',
      inAnalysis: 'En análisis',
      zeroApplications: '0 solicitudes',
      creditRequestsWillAppearHere: 'Sus solicitudes de crédito aparecerán aquí.',
      application: 'solicitud',
      confirmCancelApplication: '¿Está seguro de que desea cancelar esta solicitud de crédito?'
    },
    common: {
      save: 'Guardar',
      cancel: 'Cancelar',
      loading: 'Cargando...',
      error: 'Error',
      success: 'Éxito'
    }
  },
  ru: {
    auth: {
      platformDescription: 'Полная платформа кредитования и импорта для бразильских предприятий',
      secure: 'Безопасно',
      fast: 'Быстро',
      efficient: 'Эффективно',
      login: 'Войти',
      register: 'Регистрация',
      email: 'Email',
      password: 'Пароль',
      rememberMe: 'Запомнить меня',
      forgotPassword: 'Забыли пароль?',
      dontHaveAccount: 'Нет аккаунта?',
      alreadyHaveAccount: 'Уже есть аккаунт?',
      loginSuccess: 'Успешный вход',
      registerSuccess: 'Успешная регистрация'
    },
    credit: {
      title: 'Кредитные заявки',
      newApplication: 'Новая заявка',
      requestedAmount: 'Запрашиваемая сумма',
      status: 'Статус',
      details: 'Подробности',
      edit: 'Редактировать',
      cancel: 'Отменить',
      pending: 'В ожидании',
      approved: 'Одобрено',
      rejected: 'Отклонено',
      underReview: 'На рассмотрении'
    },
    // Financial module (Financeira)
    financial: {
      title: 'Финансовый анализ',
      dashboard: 'Финансовая панель',
      applications: 'Поданные заявки',
      analysis: 'Кредитный анализ',
      approve: 'Одобрить кредит',
      reject: 'Отклонить заявку',
      pending: 'Ожидает анализа',
      approved: 'Одобрено',
      rejected: 'Отклонено',
      underAnalysis: 'В процессе анализа',
      creditLimit: 'Кредитный лимит',
      paymentTerms: 'Условия платежа',
      riskAssessment: 'Оценка рисков',
      financialNotes: 'Финансовые заметки',
      approvalDate: 'Дата одобрения',
      submittedApplications: 'Поданные заявки',
      totalApproved: 'Всего одобрено',
      totalRejected: 'Всего отклонено',
      avgAnalysisTime: 'Среднее время анализа',
      lowRisk: 'Низкий риск',
      mediumRisk: 'Средний риск',
      highRisk: 'Высокий риск',
      confirmApproval: 'Подтвердить одобрение',
      confirmRejection: 'Подтвердить отклонение',
      approvalConfirmation: 'Вы уверены, что хотите одобрить эту кредитную заявку?',
      rejectionConfirmation: 'Вы уверены, что хотите отклонить эту заявку?',
      approvalSuccess: 'Заявка успешно одобрена',
      rejectionSuccess: 'Заявка успешно отклонена',
      enterCreditLimit: 'Введите кредитный лимит',
      selectPaymentTerms: 'Выберите условия платежа',
      addFinancialNotes: 'Добавить финансовые заметки',
      requiredField: 'Обязательное поле',
      invalidAmount: 'Неверная сумма',
      days30: '30 дней',
      days60: '60 дней',
      days90: '90 дней',
      days120: '120 дней',
      days150: '150 дней',
      days180: '180 дней',
      monthlyStatistics: 'Месячная статистика',
      receivedApplications: 'Полученные заявки',
      approvals: 'Одобрения',
      approvedVolume: 'Одобренный объем',
      recentActivity: 'Недавняя активность',
      requested: 'Запрошено',
      underReview: 'На рассмотрении',
      cancelled: 'Отменены',
      other: 'Другое',
      thisMonth: 'В этом месяце',
      totalRequested: 'Общая запрошенная сумма',
      beingUsed: 'Используется',
      availableCredit: 'Доступный кредит',
      freeToUse: 'Свободно для использования',
      avgApprovalTime: 'Среднее время одобрения',
      daysToApprove: 'Дней для одобрения',
      utilizationRate: 'Коэффициент использования',
      ofApprovedCredit: 'Одобренного кредита',
      applicationStatusTitle: 'Статус кредитных заявок',
      creditAnalysis: 'Анализ кредитов',
      importAnalysis: 'Анализ импорта',
      allSuppliers: 'Все поставщики',
      reports: 'Отчеты',
      requestId: 'ID заявки',
      preAnalysis: 'Предварительный анализ',
      createdAt: 'Создано',
      updatedAt: 'Обновлено',
      viewDetails: 'Просмотр деталей',
      edit: 'Редактировать',
      cancel: 'Отменить',
      adminCreditManagement: 'Управление кредитами - Административная область',
      adminDescription: 'Просмотр и управление всеми кредитными заявками на платформе',
      financialDescription: 'Оценка и одобрение кредитных заявок, предварительно проанализированных администрацией',
      userDescription: 'Запросить кредит для ваших импортных операций',
      allCreditApplications: 'Все кредитные заявки',
      success: 'Успех',
      error: 'Ошибка',
      applicationCancelledSuccess: 'Кредитная заявка успешно отменена.',
      applicationCancelError: 'Ошибка отмены кредитной заявки.',
      expandFilters: 'Развернуть',
      collapseFilters: 'Свернуть',
      adminFilters: 'Административные Фильтры',
      active: 'Активные',
      clear: 'Очистить',
      company: 'Компания',
      companyPlaceholder: 'Название компании...',
      minAmount: 'Минимальная Сумма (USD)',
      minAmountPlaceholder: '$ 0',
      riskLevel: 'Уровень Риска',
      allLevels: 'Все уровни',
      low: 'Низкий',
      medium: 'Средний',
      high: 'Высокий',
      maxAmount: 'Максимальная Сумма (USD)',
      maxAmountPlaceholder: '$ 1.000.000',
      allStatus: 'Все статусы',
      preApproved: 'Предварительно одобрено',
      needsDocuments: 'Нужны документы',
      needsClarification: 'Требуются разъяснения',
      inAnalysis: 'В анализе',
      zeroApplications: '0 заявок',
      creditRequestsWillAppearHere: 'Ваши кредитные заявки будут отображаться здесь.',
      application: 'заявка',
      confirmCancelApplication: 'Вы уверены, что хотите отменить эту кредитную заявку?'
    },
    common: {
      save: 'Сохранить',
      cancel: 'Отменить',
      loading: 'Загрузка...',
      error: 'Ошибка',
      success: 'Успех'
    }
  }
};

// Provider component
interface I18nProviderProps {
  children: ReactNode;
}

export const I18nProvider: React.FC<I18nProviderProps> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('pt'); // Default to Portuguese
  const [translations, setTranslations] = useState<Translations>(defaultTranslations.pt);

  // Update translations when language changes
  useEffect(() => {
    setTranslations(defaultTranslations[language]);
    // Save language preference to localStorage
    localStorage.setItem('spark-comex-language', language);
  }, [language]);

  // Load saved language preference on mount
  useEffect(() => {
    const savedLanguage = localStorage.getItem('spark-comex-language') as Language;
    if (savedLanguage && Object.keys(defaultTranslations).includes(savedLanguage)) {
      setLanguage(savedLanguage);
    }
  }, []);

  // Translation function
  const t = (key: string, params?: Record<string, string>): string => {
    const keys = key.split('.');
    let value: any = translations;
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        // Fallback to key if translation not found
        return key;
      }
    }
    
    if (typeof value === 'string') {
      // Replace parameters if provided
      if (params) {
        return Object.entries(params).reduce((str, [paramKey, paramValue]) => {
          return str.replace(new RegExp(`{{${paramKey}}}`, 'g'), paramValue);
        }, value);
      }
      return value;
    }
    
    // Fallback to key if not a string
    return key;
  };

  const value: I18nContextType = {
    language,
    setLanguage,
    t,
    translations
  };

  return (
    <I18nContext.Provider value={value}>
      {children}
    </I18nContext.Provider>
  );
};

// Hook to use the context
export const useTranslation = (): I18nContextType => {
  const context = useContext(I18nContext);
  if (!context) {
    throw new Error('useTranslation must be used within an I18nProvider');
  }
  return context;
};

// Export context for advanced usage
export { I18nContext };